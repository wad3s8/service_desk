--
-- PostgreSQL database dump
--

-- Dumped from database version 17.4
-- Dumped by pg_dump version 17.4

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: categories; Type: TABLE; Schema: public; Owner: service_desk
--

CREATE TABLE public.categories (
    id bigint NOT NULL,
    name character varying(100) NOT NULL
);


ALTER TABLE public.categories OWNER TO service_desk;

--
-- Name: categories_id_seq; Type: SEQUENCE; Schema: public; Owner: service_desk
--

ALTER TABLE public.categories ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.categories_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: locations; Type: TABLE; Schema: public; Owner: service_desk
--

CREATE TABLE public.locations (
    id bigint NOT NULL,
    active boolean NOT NULL,
    name character varying(255) NOT NULL,
    type character varying(255) NOT NULL,
    parent_id bigint,
    CONSTRAINT locations_type_check CHECK (((type)::text = ANY ((ARRAY['OFFICE'::character varying, 'REGION'::character varying, 'FEDERATION'::character varying])::text[])))
);


ALTER TABLE public.locations OWNER TO service_desk;

--
-- Name: locations_id_seq; Type: SEQUENCE; Schema: public; Owner: service_desk
--

ALTER TABLE public.locations ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.locations_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: refresh_tokens; Type: TABLE; Schema: public; Owner: service_desk
--

CREATE TABLE public.refresh_tokens (
    id bigint NOT NULL,
    expires_at timestamp(6) with time zone NOT NULL,
    ip character varying(45),
    revoked boolean NOT NULL,
    rotated_at timestamp(6) with time zone,
    token_hash character varying(88) NOT NULL,
    user_agent character varying(255),
    user_id bigint NOT NULL
);


ALTER TABLE public.refresh_tokens OWNER TO service_desk;

--
-- Name: refresh_tokens_id_seq; Type: SEQUENCE; Schema: public; Owner: service_desk
--

ALTER TABLE public.refresh_tokens ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.refresh_tokens_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: roles; Type: TABLE; Schema: public; Owner: service_desk
--

CREATE TABLE public.roles (
    id bigint NOT NULL,
    name character varying(50) NOT NULL
);


ALTER TABLE public.roles OWNER TO service_desk;

--
-- Name: roles_id_seq; Type: SEQUENCE; Schema: public; Owner: service_desk
--

ALTER TABLE public.roles ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.roles_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: subcategories; Type: TABLE; Schema: public; Owner: service_desk
--

CREATE TABLE public.subcategories (
    id bigint NOT NULL,
    default_skill_id bigint,
    name character varying(100) NOT NULL,
    category_id bigint NOT NULL
);


ALTER TABLE public.subcategories OWNER TO service_desk;

--
-- Name: subcategories_id_seq; Type: SEQUENCE; Schema: public; Owner: service_desk
--

ALTER TABLE public.subcategories ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.subcategories_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: team_locations; Type: TABLE; Schema: public; Owner: service_desk
--

CREATE TABLE public.team_locations (
    id bigint NOT NULL,
    responsibility_type character varying(255),
    location_id bigint NOT NULL,
    team_id bigint NOT NULL
);


ALTER TABLE public.team_locations OWNER TO service_desk;

--
-- Name: team_locations_id_seq; Type: SEQUENCE; Schema: public; Owner: service_desk
--

ALTER TABLE public.team_locations ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.team_locations_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: team_member_skills; Type: TABLE; Schema: public; Owner: service_desk
--

CREATE TABLE public.team_member_skills (
    id bigint NOT NULL,
    subcategory_id bigint NOT NULL,
    team_member_id bigint NOT NULL
);


ALTER TABLE public.team_member_skills OWNER TO service_desk;

--
-- Name: team_member_skills_id_seq; Type: SEQUENCE; Schema: public; Owner: service_desk
--

ALTER TABLE public.team_member_skills ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.team_member_skills_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: team_members; Type: TABLE; Schema: public; Owner: service_desk
--

CREATE TABLE public.team_members (
    id bigint NOT NULL,
    active boolean NOT NULL,
    role character varying(255) NOT NULL,
    team_id bigint NOT NULL,
    user_id bigint NOT NULL,
    CONSTRAINT team_members_role_check CHECK (((role)::text = ANY ((ARRAY['AGENT'::character varying, 'MANAGER'::character varying])::text[])))
);


ALTER TABLE public.team_members OWNER TO service_desk;

--
-- Name: team_members_id_seq; Type: SEQUENCE; Schema: public; Owner: service_desk
--

ALTER TABLE public.team_members ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.team_members_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: teams; Type: TABLE; Schema: public; Owner: service_desk
--

CREATE TABLE public.teams (
    id bigint NOT NULL,
    active boolean NOT NULL,
    code character varying(255),
    name character varying(255) NOT NULL
);


ALTER TABLE public.teams OWNER TO service_desk;

--
-- Name: teams_id_seq; Type: SEQUENCE; Schema: public; Owner: service_desk
--

ALTER TABLE public.teams ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.teams_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ticket_comments; Type: TABLE; Schema: public; Owner: service_desk
--

CREATE TABLE public.ticket_comments (
    id bigint NOT NULL,
    created_at timestamp(6) with time zone NOT NULL,
    system_comment boolean NOT NULL,
    text character varying(2000) NOT NULL,
    updated_at timestamp(6) with time zone NOT NULL,
    author_id bigint NOT NULL,
    ticket_id bigint NOT NULL
);


ALTER TABLE public.ticket_comments OWNER TO service_desk;

--
-- Name: ticket_comments_id_seq; Type: SEQUENCE; Schema: public; Owner: service_desk
--

ALTER TABLE public.ticket_comments ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ticket_comments_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ticket_history; Type: TABLE; Schema: public; Owner: service_desk
--

CREATE TABLE public.ticket_history (
    id bigint NOT NULL,
    action character varying(30) NOT NULL,
    comment character varying(512),
    created_at timestamp(6) with time zone NOT NULL,
    new_value character varying(255),
    old_value character varying(255),
    performed_by bigint NOT NULL,
    ticket_id bigint NOT NULL,
    CONSTRAINT ticket_history_action_check CHECK (((action)::text = ANY ((ARRAY['CREATED'::character varying, 'STATUS_CHANGED'::character varying, 'RESOLVED'::character varying, 'REOPENED'::character varying, 'REJECTED'::character varying, 'ASSIGNEE_CHANGED'::character varying, 'TEAM_CHANGED'::character varying, 'PRIORITY_CHANGED'::character varying, 'TITLE_CHANGED'::character varying, 'CATEGORY_CHANGED'::character varying, 'LOCATION_CHANGED'::character varying, 'COMMENT_ADDED'::character varying])::text[])))
);


ALTER TABLE public.ticket_history OWNER TO service_desk;

--
-- Name: ticket_history_id_seq; Type: SEQUENCE; Schema: public; Owner: service_desk
--

ALTER TABLE public.ticket_history ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ticket_history_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: tickets; Type: TABLE; Schema: public; Owner: service_desk
--

CREATE TABLE public.tickets (
    id bigint NOT NULL,
    created_at timestamp(6) with time zone NOT NULL,
    description character varying(512) NOT NULL,
    location character varying(255),
    priority character varying(20) NOT NULL,
    resolved_at timestamp(6) with time zone,
    status character varying(30) NOT NULL,
    title character varying(255) NOT NULL,
    updated_at timestamp(6) with time zone NOT NULL,
    assignee_id bigint,
    requester_id bigint NOT NULL,
    subcategory_id bigint,
    assigned_team_id bigint,
    location_id bigint NOT NULL,
    CONSTRAINT tickets_priority_check CHECK (((priority)::text = ANY ((ARRAY['LOW'::character varying, 'MEDIUM'::character varying, 'HIGH'::character varying])::text[]))),
    CONSTRAINT tickets_status_check CHECK (((status)::text = ANY ((ARRAY['NEW'::character varying, 'IN_PROGRESS'::character varying, 'RESOLVED'::character varying, 'CLOSED'::character varying, 'CANCELED'::character varying])::text[])))
);


ALTER TABLE public.tickets OWNER TO service_desk;

--
-- Name: tickets_id_seq; Type: SEQUENCE; Schema: public; Owner: service_desk
--

ALTER TABLE public.tickets ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.tickets_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: user_roles; Type: TABLE; Schema: public; Owner: service_desk
--

CREATE TABLE public.user_roles (
    user_id bigint NOT NULL,
    role_id bigint NOT NULL
);


ALTER TABLE public.user_roles OWNER TO service_desk;

--
-- Name: users; Type: TABLE; Schema: public; Owner: service_desk
--

CREATE TABLE public.users (
    id bigint NOT NULL,
    email character varying(320) NOT NULL,
    enabled boolean NOT NULL,
    first_name character varying(100),
    is_admin boolean NOT NULL,
    last_name character varying(100),
    locked boolean NOT NULL,
    password_hash character varying(100) NOT NULL,
    phone character varying(32),
    "position" character varying(100),
    workplace character varying(255),
    location_id bigint
);


ALTER TABLE public.users OWNER TO service_desk;

--
-- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: service_desk
--

ALTER TABLE public.users ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.users_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Data for Name: categories; Type: TABLE DATA; Schema: public; Owner: service_desk
--

COPY public.categories (id, name) FROM stdin;
1	Здание и конструкции
2	Окна, двери, доступ
3	Электрика и свет
\.


--
-- Data for Name: locations; Type: TABLE DATA; Schema: public; Owner: service_desk
--

COPY public.locations (id, active, name, type, parent_id) FROM stdin;
1	t	ЕКБ регион	REGION	\N
2	t	Екатеринбург, ул. Горького, д. 7а	OFFICE	1
3	t	Москва, пр-т Андропова, д. 18, стр. 3	OFFICE	1
4	t	Санкт-Петербург, Малый проспект Петроградской стороны, д. 87	OFFICE	1
\.


--
-- Data for Name: refresh_tokens; Type: TABLE DATA; Schema: public; Owner: service_desk
--

COPY public.refresh_tokens (id, expires_at, ip, revoked, rotated_at, token_hash, user_agent, user_id) FROM stdin;
1	2025-12-18 08:01:03.227682+05	0:0:0:0:0:0:0:1	f	\N	HOhnLoCVjoBjwnv3RLcf9I9gEN4sc9MHRIAkkMM7k+4=	PostmanRuntime/7.49.1	1
2	2025-12-18 08:11:54.362525+05	0:0:0:0:0:0:0:1	f	\N	BxrFAjokhzNtm1h6IVZcLV1WMTE/qgoSkgwr7b+yX5o=	PostmanRuntime/7.49.1	1
3	2025-12-18 08:17:58.761653+05	0:0:0:0:0:0:0:1	f	\N	U/Xbmih2vPj8x/d7Ck4EgQ5STdZYdG2yTmuOKU12Q00=	PostmanRuntime/7.49.1	2
4	2025-12-18 08:29:19.627401+05	0:0:0:0:0:0:0:1	f	\N	Jlq0Js4k1QmIDzkkaEUBAVZMZqwZmJxdGNckZOCM48k=	PostmanRuntime/7.49.1	2
5	2025-12-18 08:46:19.537298+05	0:0:0:0:0:0:0:1	f	\N	uMGg0gTg1lYBdqxwGHnlMtq0x3a/EAhpZrGmTtT1BjY=	PostmanRuntime/7.49.1	2
6	2025-12-18 08:46:21.243337+05	0:0:0:0:0:0:0:1	f	\N	l6akmMgDV4nOtQTJC+5M2IwB2YmO3abD3vRnmLmINxg=	PostmanRuntime/7.49.1	2
7	2025-12-23 21:08:48.030089+05	0:0:0:0:0:0:0:1	f	\N	Egf4hVqWHGGE6QuQjpo+EJp2+BsqiUv7UkdGyk8m7E0=	PostmanRuntime/7.49.1	2
8	2025-12-23 21:16:11.465504+05	0:0:0:0:0:0:0:1	f	\N	AEhZJe/wH84Axu8/H9nMbwsQfE35JQ/bUJXF25qjZ6g=	PostmanRuntime/7.49.1	2
9	2025-12-23 21:25:03.609222+05	0:0:0:0:0:0:0:1	f	\N	S7dvyRph9nQq6ifl1c4A0Qn2baTVu3R+mlLtcBhBQMw=	Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0	2
10	2025-12-26 14:57:56.56768+05	0:0:0:0:0:0:0:1	f	\N	ofg2YDhGbsaqXTnw6B1HMGDUm65V+7n9QxHbpXUVQ5A=	PostmanRuntime/7.49.1	5
11	2025-12-29 17:53:04.774456+05	0:0:0:0:0:0:0:1	f	\N	3YWv+pfk/9n98QsgmAbxXtmU4f9THj80kvkc4cbvmyc=	PostmanRuntime/7.49.1	5
12	2025-12-29 18:35:23.913802+05	0:0:0:0:0:0:0:1	f	\N	N9DE+/AO2I3w5Fr3rTXEVyrbocwZoxfRYHFjVTOQ7Sc=	PostmanRuntime/7.49.1	5
13	2025-12-29 18:36:10.667998+05	0:0:0:0:0:0:0:1	f	\N	L7dNc5L2iWyk273bLajO88l2T+hMAWFKIL3vE/N4N3g=	PostmanRuntime/7.49.1	5
14	2025-12-29 18:37:00.6804+05	0:0:0:0:0:0:0:1	f	\N	7QQ5M7U3gdLaDwE5T0+SuYVx2nRtDQN2lYf6I9RlBS0=	PostmanRuntime/7.49.1	5
15	2025-12-29 19:14:49.866107+05	0:0:0:0:0:0:0:1	f	\N	QCyhoKAHvB5avyq7M8m94bqUfnHyxqM6Kiz4RPSoIT8=	PostmanRuntime/7.49.1	5
16	2025-12-29 19:23:13.56317+05	0:0:0:0:0:0:0:1	f	\N	ac4gSqUimQ1UHai6MNXfH+uqp4Mll84wsQp+bezo3AY=	PostmanRuntime/7.49.1	5
17	2025-12-29 19:34:24.780978+05	0:0:0:0:0:0:0:1	f	\N	IxyaJJzF/3CQ8n/hdMnrIVRfQCV3LaOvGtLOBpBPO64=	PostmanRuntime/7.49.1	5
18	2025-12-30 16:36:56.592995+05	0:0:0:0:0:0:0:1	f	\N	Rg9sXMsQZEjOFsDZGteLCddChQxMOsLbPgghng7XGmM=	PostmanRuntime/7.51.0	5
19	2025-12-30 16:55:46.230596+05	0:0:0:0:0:0:0:1	f	\N	tAJzQjQbiRPTxgc8ZFd8ckpyGyG5gM4IzS/fYUBQxfw=	PostmanRuntime/7.51.0	5
20	2025-12-30 16:57:40.230308+05	0:0:0:0:0:0:0:1	f	\N	3fqFRFxary4H8sE+pQlAW8Ubz3WIeMh4XUvxFAwoVbA=	PostmanRuntime/7.51.0	5
21	2025-12-30 22:00:00.376788+05	0:0:0:0:0:0:0:1	f	\N	zbUrdIM6fBCE7kDi6PPhfRqPU5pKiSXtkl0JDidt5rI=	PostmanRuntime/7.51.0	5
22	2025-12-30 22:12:26.074792+05	0:0:0:0:0:0:0:1	f	\N	OcgCe9q9PLfToPvfgnYO9wd1AyWMb2GFSP04BialxYI=	PostmanRuntime/7.51.0	5
23	2025-12-30 22:22:50.128556+05	0:0:0:0:0:0:0:1	f	\N	k/M1Byo5dKuV1+0gvUCqdSVit00GfYJ9RaTsNWJghLQ=	PostmanRuntime/7.51.0	5
24	2025-12-30 23:16:51.981006+05	0:0:0:0:0:0:0:1	f	\N	2Zb4HpREAwUUQIJ0p7Q6IkP1cihlZC2EuYUTIHW456A=	PostmanRuntime/7.51.0	5
25	2025-12-30 23:29:44.509633+05	0:0:0:0:0:0:0:1	f	\N	OYeJZFTsVzMnDruBbXFiWq7uGe34itNqQy4auHhinU8=	PostmanRuntime/7.51.0	5
26	2025-12-31 01:08:04.175294+05	0:0:0:0:0:0:0:1	f	\N	F2tcajZU0TS4M1VV78cFfov5TMR4mpEKivI5JpLv0e4=	PostmanRuntime/7.51.0	11
27	2025-12-31 20:05:37.198631+05	0:0:0:0:0:0:0:1	f	\N	HqKvZE76Ifc/2EoE7ejC47CRpPmp3rGkuMyxhBfWWO4=	PostmanRuntime/7.51.0	8
28	2025-12-31 20:08:27.823722+05	0:0:0:0:0:0:0:1	f	\N	2SsnC2l2StCht8Rxy2HfayUQDBZShDhzUvXqcTq9qNw=	PostmanRuntime/7.51.0	8
29	2025-12-31 20:08:52.216206+05	0:0:0:0:0:0:0:1	f	\N	PfSU4iEtI37WgybZ+mQo0CMOA5uw0+IeHsWu/4Paixc=	PostmanRuntime/7.51.0	5
30	2025-12-31 20:59:36.091859+05	0:0:0:0:0:0:0:1	f	\N	+hC23WzgQIGooln4f9gRfq+oQYzIve6CgNF47O83PDM=	PostmanRuntime/7.51.0	5
31	2025-12-31 21:37:05.240506+05	0:0:0:0:0:0:0:1	f	\N	5kt2M63akznWMOslz3ckog6xvPEmV64EspH0pWzVTY8=	PostmanRuntime/7.51.0	5
32	2025-12-31 21:37:21.674203+05	0:0:0:0:0:0:0:1	f	\N	AWxiGe58etAc08p4fX9U0gSkRxGLBtTR0MXyppGUt0U=	PostmanRuntime/7.51.0	5
33	2025-12-31 21:44:17.619634+05	0:0:0:0:0:0:0:1	t	2025-12-17 21:45:38.981911+05	9F8XMKvO1dvwHnyxZ7zFyo+cKxAi+LNTdQ7DfpInJtE=	PostmanRuntime/7.51.0	5
34	2025-12-31 21:45:39.048403+05	0:0:0:0:0:0:0:1	t	2025-12-17 21:45:47.09083+05	+ihiHbe6oCkLmr1M+UuiXgn03gd12zNCLx6NOzFdd14=	PostmanRuntime/7.51.0	5
35	2025-12-31 21:45:47.09991+05	0:0:0:0:0:0:0:1	t	2025-12-17 21:45:48.629445+05	zjFUmZwTBq9axO9FvyCwk7y6LTI8c4boLE0W7iPZBok=	PostmanRuntime/7.51.0	5
36	2025-12-31 21:45:48.63416+05	0:0:0:0:0:0:0:1	t	2025-12-17 22:25:05.854384+05	9WCCTDucplCYaKI23nMsWKIFFBDZcBKVxh5VeRkfaA8=	PostmanRuntime/7.51.0	5
37	2025-12-31 22:25:05.935573+05	0:0:0:0:0:0:0:1	t	2025-12-17 22:48:17.22605+05	0IVfHpeoUFa5P3GQbfBWh10/vw0T6+LG+3YEhk1A/6Q=	PostmanRuntime/7.51.0	5
38	2025-12-31 22:48:17.300577+05	0:0:0:0:0:0:0:1	f	\N	tt6qoXmb3tQKemAANh/kUjc/DkU8w247bq35DbL7nEs=	PostmanRuntime/7.51.0	5
\.


--
-- Data for Name: roles; Type: TABLE DATA; Schema: public; Owner: service_desk
--

COPY public.roles (id, name) FROM stdin;
2	executor
1	customer
4	supervisor
3	aho_head
\.


--
-- Data for Name: subcategories; Type: TABLE DATA; Schema: public; Owner: service_desk
--

COPY public.subcategories (id, default_skill_id, name, category_id) FROM stdin;
2	\N	Стены и перегородки	1
1	\N	Потолки	1
3	\N	Полы и покрытия	1
4	\N	Окна	2
5	\N	Двери	2
6	\N	Замки	2
7	\N	Розетки	3
8	\N	Выключатели	3
9	\N	Освещение	3
\.


--
-- Data for Name: team_locations; Type: TABLE DATA; Schema: public; Owner: service_desk
--

COPY public.team_locations (id, responsibility_type, location_id, team_id) FROM stdin;
1	\N	2	1
\.


--
-- Data for Name: team_member_skills; Type: TABLE DATA; Schema: public; Owner: service_desk
--

COPY public.team_member_skills (id, subcategory_id, team_member_id) FROM stdin;
0	2	1
\.


--
-- Data for Name: team_members; Type: TABLE DATA; Schema: public; Owner: service_desk
--

COPY public.team_members (id, active, role, team_id, user_id) FROM stdin;
1	t	AGENT	1	5
2	t	MANAGER	1	4
\.


--
-- Data for Name: teams; Type: TABLE DATA; Schema: public; Owner: service_desk
--

COPY public.teams (id, active, code, name) FROM stdin;
1	t	52	52 team
\.


--
-- Data for Name: ticket_comments; Type: TABLE DATA; Schema: public; Owner: service_desk
--

COPY public.ticket_comments (id, created_at, system_comment, text, updated_at, author_id, ticket_id) FROM stdin;
\.


--
-- Data for Name: ticket_history; Type: TABLE DATA; Schema: public; Owner: service_desk
--

COPY public.ticket_history (id, action, comment, created_at, new_value, old_value, performed_by, ticket_id) FROM stdin;
\.


--
-- Data for Name: tickets; Type: TABLE DATA; Schema: public; Owner: service_desk
--

COPY public.tickets (id, created_at, description, location, priority, resolved_at, status, title, updated_at, assignee_id, requester_id, subcategory_id, assigned_team_id, location_id) FROM stdin;
\.


--
-- Data for Name: user_roles; Type: TABLE DATA; Schema: public; Owner: service_desk
--

COPY public.user_roles (user_id, role_id) FROM stdin;
5	1
2	4
3	3
4	2
8	1
9	2
10	3
11	4
\.


--
-- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: service_desk
--

COPY public.users (id, email, enabled, first_name, is_admin, last_name, locked, password_hash, phone, "position", workplace, location_id) FROM stdin;
1	user12@example.com	t	\N	f	\N	f	$2a$10$jUwjvl3lD.vzILJXtrP71eNuuo9cn7E9Gj3gdCv4pWhGQrcCsw6oW	\N	\N	\N	\N
2	user15@example.com	t	\N	f	\N	f	$2a$10$3IE0mgy6FMiy4e614nCdZ.WuDWn1McOk0uLoVyRkkf506WvjO8mN2	\N	\N	\N	\N
3	user16@example.com	t	\N	f	\N	f	$2a$10$jqnWmqQH7UDtdcWAiJceC.LaOVN2lTQbkH1aOWnc1dLDc/4PDuavG	\N	\N	\N	\N
4	user17@example.com	t	Иван	f	Петров	f	$2a$10$hQ//HWKbaU3kDv0kXDO5p.QOkBVKqqqg2hq/8onX1TQE7mwWe.hqa	\N	\N	\N	\N
5	user18@example.com	t	Иван	f	Петров	f	$2a$10$ZoKUus8l.oUWIVmKL8FMpe7shHMBjItng...PdLiBUN1fmHEDIqGO	89224785333	\N	\N	2
8	customer@example.com	t	Тест	f	Тест	f	$2a$10$2l7jFwvArRiEabTu7zY.S.qDHU6/YeKCYpaRgN9jKCm5BCXVjS6ie	\N	\N	\N	\N
9	executor@example.com	t	Тест	f	Тест	f	$2a$10$F.yefda2OY0q87f2i7nHeeY5Od5BdAGlEGfSSk5Rtsjk4tGzPMmTS	\N	\N	\N	\N
10	aho@example.com	t	Тест	f	Тест	f	$2a$10$irFU3c1OQ/e4T1K8dmUcoOD2BCAwyBXPYkBGUh/7vLPef8g6aUmT.	\N	\N	\N	\N
11	supervisor@example.com	t	Тест	f	Тест	f	$2a$10$oUEK3Q9tG9QPIJX7.mTcLOoELM7PTkDYG1MRc7hE8Td87BN.n/ExK	\N	\N	\N	\N
\.


--
-- Name: categories_id_seq; Type: SEQUENCE SET; Schema: public; Owner: service_desk
--

SELECT pg_catalog.setval('public.categories_id_seq', 1, false);


--
-- Name: locations_id_seq; Type: SEQUENCE SET; Schema: public; Owner: service_desk
--

SELECT pg_catalog.setval('public.locations_id_seq', 1, false);


--
-- Name: refresh_tokens_id_seq; Type: SEQUENCE SET; Schema: public; Owner: service_desk
--

SELECT pg_catalog.setval('public.refresh_tokens_id_seq', 38, true);


--
-- Name: roles_id_seq; Type: SEQUENCE SET; Schema: public; Owner: service_desk
--

SELECT pg_catalog.setval('public.roles_id_seq', 1, false);


--
-- Name: subcategories_id_seq; Type: SEQUENCE SET; Schema: public; Owner: service_desk
--

SELECT pg_catalog.setval('public.subcategories_id_seq', 1, false);


--
-- Name: team_locations_id_seq; Type: SEQUENCE SET; Schema: public; Owner: service_desk
--

SELECT pg_catalog.setval('public.team_locations_id_seq', 1, false);


--
-- Name: team_member_skills_id_seq; Type: SEQUENCE SET; Schema: public; Owner: service_desk
--

SELECT pg_catalog.setval('public.team_member_skills_id_seq', 1, false);


--
-- Name: team_members_id_seq; Type: SEQUENCE SET; Schema: public; Owner: service_desk
--

SELECT pg_catalog.setval('public.team_members_id_seq', 1, false);


--
-- Name: teams_id_seq; Type: SEQUENCE SET; Schema: public; Owner: service_desk
--

SELECT pg_catalog.setval('public.teams_id_seq', 1, false);


--
-- Name: ticket_comments_id_seq; Type: SEQUENCE SET; Schema: public; Owner: service_desk
--

SELECT pg_catalog.setval('public.ticket_comments_id_seq', 1, true);


--
-- Name: ticket_history_id_seq; Type: SEQUENCE SET; Schema: public; Owner: service_desk
--

SELECT pg_catalog.setval('public.ticket_history_id_seq', 10, true);


--
-- Name: tickets_id_seq; Type: SEQUENCE SET; Schema: public; Owner: service_desk
--

SELECT pg_catalog.setval('public.tickets_id_seq', 7, true);


--
-- Name: users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: service_desk
--

SELECT pg_catalog.setval('public.users_id_seq', 11, true);


--
-- Name: categories categories_pkey; Type: CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.categories
    ADD CONSTRAINT categories_pkey PRIMARY KEY (id);


--
-- Name: locations locations_pkey; Type: CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.locations
    ADD CONSTRAINT locations_pkey PRIMARY KEY (id);


--
-- Name: refresh_tokens refresh_tokens_pkey; Type: CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.refresh_tokens
    ADD CONSTRAINT refresh_tokens_pkey PRIMARY KEY (id);


--
-- Name: roles roles_pkey; Type: CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.roles
    ADD CONSTRAINT roles_pkey PRIMARY KEY (id);


--
-- Name: subcategories subcategories_pkey; Type: CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.subcategories
    ADD CONSTRAINT subcategories_pkey PRIMARY KEY (id);


--
-- Name: team_locations team_locations_pkey; Type: CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.team_locations
    ADD CONSTRAINT team_locations_pkey PRIMARY KEY (id);


--
-- Name: team_member_skills team_member_skills_pkey; Type: CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.team_member_skills
    ADD CONSTRAINT team_member_skills_pkey PRIMARY KEY (id);


--
-- Name: team_members team_members_pkey; Type: CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.team_members
    ADD CONSTRAINT team_members_pkey PRIMARY KEY (id);


--
-- Name: teams teams_pkey; Type: CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.teams
    ADD CONSTRAINT teams_pkey PRIMARY KEY (id);


--
-- Name: ticket_comments ticket_comments_pkey; Type: CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.ticket_comments
    ADD CONSTRAINT ticket_comments_pkey PRIMARY KEY (id);


--
-- Name: ticket_history ticket_history_pkey; Type: CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.ticket_history
    ADD CONSTRAINT ticket_history_pkey PRIMARY KEY (id);


--
-- Name: tickets tickets_pkey; Type: CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.tickets
    ADD CONSTRAINT tickets_pkey PRIMARY KEY (id);


--
-- Name: team_locations ukavquv7367odamdhf8po2710hm; Type: CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.team_locations
    ADD CONSTRAINT ukavquv7367odamdhf8po2710hm UNIQUE (team_id, location_id);


--
-- Name: team_member_skills ukibjec8s51d1exkbnf7ifo9bjr; Type: CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.team_member_skills
    ADD CONSTRAINT ukibjec8s51d1exkbnf7ifo9bjr UNIQUE (team_member_id, subcategory_id);


--
-- Name: team_members uks8nuwsa7nvebc246ed822w68x; Type: CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.team_members
    ADD CONSTRAINT uks8nuwsa7nvebc246ed822w68x UNIQUE (team_id, user_id);


--
-- Name: categories ukt8o6pivur7nn124jehx7cygw5; Type: CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.categories
    ADD CONSTRAINT ukt8o6pivur7nn124jehx7cygw5 UNIQUE (name);


--
-- Name: user_roles user_roles_pkey; Type: CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.user_roles
    ADD CONSTRAINT user_roles_pkey PRIMARY KEY (user_id, role_id);


--
-- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id);


--
-- Name: roles ux_roles_name; Type: CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.roles
    ADD CONSTRAINT ux_roles_name UNIQUE (name);


--
-- Name: refresh_tokens ux_rt_token_hash; Type: CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.refresh_tokens
    ADD CONSTRAINT ux_rt_token_hash UNIQUE (token_hash);


--
-- Name: subcategories ux_subcategories_category_name; Type: CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.subcategories
    ADD CONSTRAINT ux_subcategories_category_name UNIQUE (category_id, name);


--
-- Name: users ux_users_email; Type: CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT ux_users_email UNIQUE (email);


--
-- Name: ix_rt_expires; Type: INDEX; Schema: public; Owner: service_desk
--

CREATE INDEX ix_rt_expires ON public.refresh_tokens USING btree (expires_at);


--
-- Name: ix_rt_user; Type: INDEX; Schema: public; Owner: service_desk
--

CREATE INDEX ix_rt_user ON public.refresh_tokens USING btree (user_id);


--
-- Name: ix_users_phone; Type: INDEX; Schema: public; Owner: service_desk
--

CREATE INDEX ix_users_phone ON public.users USING btree (phone);


--
-- Name: team_locations fk8dojsnpjhlpijdt45bnex6655; Type: FK CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.team_locations
    ADD CONSTRAINT fk8dojsnpjhlpijdt45bnex6655 FOREIGN KEY (team_id) REFERENCES public.teams(id);


--
-- Name: ticket_comments fk_comment_author; Type: FK CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.ticket_comments
    ADD CONSTRAINT fk_comment_author FOREIGN KEY (author_id) REFERENCES public.users(id);


--
-- Name: ticket_comments fk_comment_ticket; Type: FK CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.ticket_comments
    ADD CONSTRAINT fk_comment_ticket FOREIGN KEY (ticket_id) REFERENCES public.tickets(id);


--
-- Name: ticket_history fk_history_ticket; Type: FK CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.ticket_history
    ADD CONSTRAINT fk_history_ticket FOREIGN KEY (ticket_id) REFERENCES public.tickets(id);


--
-- Name: ticket_history fk_history_user; Type: FK CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.ticket_history
    ADD CONSTRAINT fk_history_user FOREIGN KEY (performed_by) REFERENCES public.users(id);


--
-- Name: refresh_tokens fk_rt_user; Type: FK CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.refresh_tokens
    ADD CONSTRAINT fk_rt_user FOREIGN KEY (user_id) REFERENCES public.users(id);


--
-- Name: subcategories fk_subcategory_category; Type: FK CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.subcategories
    ADD CONSTRAINT fk_subcategory_category FOREIGN KEY (category_id) REFERENCES public.categories(id);


--
-- Name: tickets fk_ticket_assignee; Type: FK CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.tickets
    ADD CONSTRAINT fk_ticket_assignee FOREIGN KEY (assignee_id) REFERENCES public.users(id);


--
-- Name: tickets fk_ticket_location; Type: FK CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.tickets
    ADD CONSTRAINT fk_ticket_location FOREIGN KEY (location_id) REFERENCES public.locations(id);


--
-- Name: tickets fk_ticket_requester; Type: FK CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.tickets
    ADD CONSTRAINT fk_ticket_requester FOREIGN KEY (requester_id) REFERENCES public.users(id);


--
-- Name: tickets fk_ticket_subcategory; Type: FK CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.tickets
    ADD CONSTRAINT fk_ticket_subcategory FOREIGN KEY (subcategory_id) REFERENCES public.subcategories(id);


--
-- Name: tickets fk_ticket_team; Type: FK CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.tickets
    ADD CONSTRAINT fk_ticket_team FOREIGN KEY (assigned_team_id) REFERENCES public.teams(id);


--
-- Name: team_member_skills fk_tms_member; Type: FK CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.team_member_skills
    ADD CONSTRAINT fk_tms_member FOREIGN KEY (team_member_id) REFERENCES public.team_members(id);


--
-- Name: team_member_skills fk_tms_subcategory; Type: FK CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.team_member_skills
    ADD CONSTRAINT fk_tms_subcategory FOREIGN KEY (subcategory_id) REFERENCES public.subcategories(id);


--
-- Name: user_roles fk_ur_role; Type: FK CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.user_roles
    ADD CONSTRAINT fk_ur_role FOREIGN KEY (role_id) REFERENCES public.roles(id);


--
-- Name: user_roles fk_ur_user; Type: FK CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.user_roles
    ADD CONSTRAINT fk_ur_user FOREIGN KEY (user_id) REFERENCES public.users(id);


--
-- Name: users fk_user_location; Type: FK CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT fk_user_location FOREIGN KEY (location_id) REFERENCES public.locations(id);


--
-- Name: team_members fkee8x7x5026imwmma9kndkxs36; Type: FK CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.team_members
    ADD CONSTRAINT fkee8x7x5026imwmma9kndkxs36 FOREIGN KEY (user_id) REFERENCES public.users(id);


--
-- Name: team_locations fkh2s238f0bxi42isdo404erpyf; Type: FK CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.team_locations
    ADD CONSTRAINT fkh2s238f0bxi42isdo404erpyf FOREIGN KEY (location_id) REFERENCES public.locations(id);


--
-- Name: locations fkhjdkpuoptx1cd04r3atchkpi0; Type: FK CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.locations
    ADD CONSTRAINT fkhjdkpuoptx1cd04r3atchkpi0 FOREIGN KEY (parent_id) REFERENCES public.locations(id);


--
-- Name: team_members fktgca08el3ofisywcf11f0f76t; Type: FK CONSTRAINT; Schema: public; Owner: service_desk
--

ALTER TABLE ONLY public.team_members
    ADD CONSTRAINT fktgca08el3ofisywcf11f0f76t FOREIGN KEY (team_id) REFERENCES public.teams(id);


--
-- PostgreSQL database dump complete
--

